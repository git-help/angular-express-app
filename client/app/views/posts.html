<div class="row">
  <div class="col-xs-12">


    <!-- START createPost form -->
    <div> 
        <form ng-submit="createPost()" role="form">
          <legend>Post Form</legend>
          <fieldset>
          <div class="form-group">
            <input    type="text" ng-model="newPost.title"    placeholder="title"    class="form-control">
          </div>
          <div class="form-group">
            <input    type="text" ng-model="newPost.text"    placeholder="text"    class="form-control">
          </div>
          <div class="form-group">
            <input    type="text" ng-model="newPost.url"    placeholder="url"    class="form-control">
          </div>
          <div class="form-group">
            <textarea ui-codemirror="{ onLoad : codemirrorLoaded }" ng-model="newPost.snippet" cols="30" rows="5"></textarea>
          </div>
          <div>
            <input    type="text" ng-model="newPost.url"    placeholder="url"    class="form-control">
          </div>
          <button class="btn btn-primary">Save Post</button>
          </fieldset>
        </form>
    </div>
    <!-- END createPost form -->


    <!-- START post list -->
    <div ng-repeat="post in posts track by $index">

      <form ng-submit="updatePost()" ng-show="editing" role="form">
      <legend>Edit post</legend>
        <fieldset>
        <div class="form-group">
          <input    type="text" ng-model="post.title"    placeholder="title"    class="form-control">
        </div>
        <div class="form-group">
          <input    type="text" ng-model="post.text"    placeholder="text"    class="form-control">
        </div>
        <div class="form-group">
          <input    type="text" ng-model="post.url"    placeholder="url"    class="form-control">
        </div>
        <div class="form-group">
          <textarea ui-codemirror="{ onLoad : codemirrorLoaded }"  ng-model="post.snippet" cols="30" rows="5"></textarea>
        </div>
        <div><button class="btn btn-success">Update Post</button></div>
        </fieldset>
        <hr>
      </form>

      <div ng-hide="editing">
        <div class="panel panel-primary">
          <div class="panel-heading"><div class="post-title">{{post.title}}</div></div>
          <div class="panel-body">
            <div class="post-id">{{post._id}}</div>
            <div class="post-text">{{post.text}}</div>
            <div class="post-url">{{post.url}}</div>
            <div>
              <button ng-click="deletePost()" class="btn btn-danger" >Delete</button>
              <button ng-click="editPost()"   class="btn btn-primary">Edit</button>
            </div>
          </div>
          <!-- START codemirror instance -->
          <!-- ui-codemirror-opts= -->
            <ui-codemirror ui-codemirror-opts="{
                                                'value': '{{post.snippet}}',
                                                'theme': 'vibrant-ink',
                                                'mode' : 'javascript'
                                                }"
                           ui-refresh="{ 'value': '$scope.changed' }"></ui-codemirror>
            <!-- <div class="post-snippet" ui-codemirror="{ onLoad : codemirrorLoaded }" ></div> -->
          <!-- END codemirror instance -->
          <hr>
        </div>

      </div>

    </div>
    <!-- END post list -->





  </div>
</div>

